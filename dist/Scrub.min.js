"use strict";function debounce(e,t,r){var l;return function(){var n=this,c=arguments,o=function(){l=null,r||e.apply(n,c)},i=r&&!l;clearTimeout(l),l=setTimeout(o,t),i&&e.apply(n,c)}}function Scrub(e){function t(){var t=isObject(e)?document.querySelectorAll(e.target)[0]:document.querySelectorAll(e)[0];try{!function(r){var l=isObject(e)?e.target:e;if(l=l.replace("#",""),l=l.replace(".",""),l.indexOf(".")>-1&&document.querySelectorAll(l).length>1&&console.warn("%cScrub Slider works best if you use an %cID%c or a %cunique%c class... ","color:cornflowerblue;","color:indianred;","color:cornflowerblue;","color:indianred;","color:cornflowerblue;"),void 0!=t){t.className+=" scrub-slider";var n=t.offsetWidth;null!=e.height&&(t.style.height=e.height);for(var c=t.children,o=0;o<2;o++){var i=c[o];c[o]&&i.tagName&&function(r,l,c){if("DIV"==l){var o=r.cloneNode(!0);r.parentNode.removeChild(r);var i=document.createElement("div");if(i.className=0==c?"scrub-content scrub-left":"scrub-content scrub-right",i.style.width=parseInt(n/2)+"px",t.insertBefore(i,t.firstChild),o.style.width=n+"px",null!=e.alt&&o.setAttribute("alt",0==c?e.alt[0]:e.alt[1]),null!=e.src){var s=0==c?e.src[0]:e.src[1];o.style.backgroundImage="url("+s+")"}i.append(o),""==r.style.backgroundImage&&console.warn("%cScrub Slider divs must have a %cbackground image to work!%c >:[","color:cornflowerblue;","color:indianred;","color:cornflowerblue;");var a=debounce(function(e){var r=t.offsetWidth;i.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){a(o)})}else if("IMG"==l){var u=document.createElement("div"),d=r.getAttribute("src");null!=e.src&&(d=0==c?e.src[0]:e.src[1]),r.parentNode.removeChild(r);var f=document.createElement("div");f.className=0==c?"scrub-content scrub-left":"scrub-content scrub-right",f.style.width=parseInt(n/2)+"px",null!=e.alt&&u.setAttribute("alt",0==c?e.alt[0]:e.alt[1]),t.insertBefore(f,t.firstChild),u.style.width=n+"px",u.style.backgroundImage="url("+d+")",f.append(u);var h=debounce(function(e){var r=t.offsetWidth;f.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){h(u)})}}(c[o],i.tagName,o)}r(t)}else console.warn("%cScrub Slider needs to be passed an appropriate selector %c- preferably an ID, but a specific, unique class works too.","color:cornflowerblue;","color:indianred;")}(function(t){var r=document.createElement("div");r.className="sliding handleOn ",r.innerHTML='<span class="sliding-left"></span><span class="sliding-right"></span>',t.appendChild(r),0==e.handle&&(r.innerHTML="",r.classList.remove("handleOn"));var l=debounce(function(e,t,l){if(r){var n=t-e;l.querySelectorAll(".sliding")[0].style.left=(e>0?e:0)+"px";l.querySelectorAll(".scrub-left")[0].style.width=(e>0?e:0)+"px";l.querySelectorAll(".scrub-right")[0].style.width=(n>0?n:0)+"px"}},1);t.addEventListener("mousemove",function(e){var r=e.clientX-this.offsetLeft,n=t.offsetWidth;l(r,n,t)})})}catch(e){console.trace("%cuh-oh: %c"+e,"color:indianred;","color:cornflowerblue;")}}isObject(e)?(e.target=void 0!==e.target&&isObject(e)?e.target:null,e.height=void 0!==e.height&&isObject(e)?e.height:"500px",e.handle=void 0===e.handle||!isObject(e)||e.handle,e.src=void 0!==e.src&&isObject(e)?e.src:null,e.alt=void 0!==e.alt&&isObject(e)?e.alt:null,t()):t()}var isObject=function(e){return!!e&&e.constructor===Object};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcnViLmpzIl0sIm5hbWVzIjpbImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImNvbnRleHQiLCJhcHBseSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJjYWxsTm93IiwiU2NydWIiLCJzY3J1YkFyZyIsIlNjcnViSW5pdGlhdGUiLCJzY3J1YlNsaWRlciIsImlzT2JqZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFyZ2V0IiwiY2FsbGJhY2siLCJzY3J1Yk5hbWUiLCJyZXBsYWNlIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2xhc3NOYW1lIiwib2Zmc2V0V2lkdGgiLCJ0eXBlIiwic3R5bGUiLCJoZWlnaHQiLCJzY3J1YkNoaWxkcmVuIiwic2NydWJDb250IiwiaSIsImNoaWxkIiwiZWwiLCJ3aWR0aCIsImluZGV4IiwiaW5zZXJ0QmVmb3JlIiwic2NydWJJbWFnZSIsInNsaWRlcldpZHRoIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwic2V0QXR0cmlidXRlIiwicGFyc2VJbnQiLCJmaXJzdENoaWxkIiwiYmFja2dyb3VuZEltYWdlIiwiYXBwZW5kIiwiYWx0Iiwic3JjIiwiaW1nU3JjIiwibmV3U2xpZGVyV2lkdGgiLCJjb25zb2xlIiwid2FybiIsInJlemlzZUZuIiwiY3JlYXRlRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3JlYXRlU2NydWJJbWFnZXMiLCJ0YWdOYW1lIiwic2NydWJIYW5kbGUiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm1vdmVyIiwicG9zIiwiZnVsbCIsInNsaWRlciIsInNsaWRpbmciLCJjb250ZW50TGVmdCIsImNvbnRlbnRSaWdodCIsInNocmluayIsIm1vdXNlUG9zaXRpb24iLCJjbGllbnRYIiwib2Zmc2V0TGVmdCIsImZ1bGxXaWR0aCIsInRyYWNlIiwiaGFuZGxlIiwiYSIsImNvbnN0cnVjdG9yIiwiT2JqZWN0Il0sIm1hcHBpbmdzIjoiWUFNQyxTQUZEQSxVQUFBQyxFQUFBQyxFQUFBQyxHQUdBLEdBQUFDLEVBQ0EsT0FBU0osWUFDREksR0FBQUEsR0FBSkMsS0FBQUMsRUFBQUMsVUFDT0MsRUFBQSxXQUNDQyxFQUFVLEtBQU1ILEdBQXBCTCxFQUFBUyxNQUFBRCxFQUFBSCxJQUVJRixFQUFVRCxJQUFWQyxDQUNBTyxjQUFLUixHQUNSQyxFQUhEUSxXQUFBSixFQUFBTixHQUlJVyxHQUFBQSxFQUFVVixNQUFBQSxFQUFjQyxJQUkvQixRQVZEVSxPQUFBQyxHQTRCQyxRQUFBQyxLQUVMLEdBQUFDLEdBQUFDLFNBQXlCSCxHQUFBSSxTQUFBQyxpQkFBQUwsRUFBQU0sUUFBQSxHQUFBRixTQUFBQyxpQkFBQUwsR0FBQSxFQUVyQixNQUdJLFNBQW1CTyxHQUdqQixHQUFJQyxHQUFjTCxTQUFTSCxHQUFlQSxFQUFTTSxPQUFVTixDQUs1RCxJQU5EUSxFQUFBQSxFQUFBQyxRQUFBLElBQUEsSUFDQUQsRUFBSUEsRUFBY0wsUUFBQUEsSUFBU0gsSUFDM0JRLEVBQUFBLFFBQVlBLE1BQVVDLEdBQVFMLFNBQTlCQyxpQkFBQUcsR0FBQUUsT0FBQSxHQUNBRixRQUFBQSxLQUFBQSwyRUFBQSx3QkFBQSxtQkFBQSx3QkFBQSxtQkFBQSw2QkFHQ0csSUFBQVQsRUFBQSxDQUdHQSxFQUFZVSxXQUFhLGVBRDNCLElBQUtWLEdBQUFBLEVBQTJCVyxXQVlYLE9BQWJiLEVBQUtjLFNBQ0ZaLEVBQUFhLE1BQUFDLE9BQUFoQixFQUFBZ0IsT0F1RVAsS0FBQSxHQW5FT0MsR0FBSUMsRUFBWWQsU0FtRXZCZSxFQUFJLEVBQUlBLEVBQUUsRUFBR0EsSUFBYixDQUNFLEdBQUFDLEdBQUlBLEVBQVFILEVBQ1pBLEdBQUtBLElBQUFHLEVBQW9CQSxTQW5FcEJGLFNBQUFHLEVBQWdCQyxFQUFoQkMsR0FDQXJCLEdB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QU1PLGlCQUFxQmdDLGVBQ3pDSyxHQUFBQSxNQUFlSCxPQUFPbkQsRUFBQUEsRUFBaUJpRCxFQUFBLEdBQUEsSUFDeEJ2QyxHQUFNTyxpQkFBUyxnQkFDckMsR0FBQVAsTUFBQU8sT0FBQXNDLEVBQUEsRUFBQUEsRUFBQSxHQUFBLE9BRUwsRUFFRTFELEdBQUkyRCxpQkFBa0JDLFlBQWVDLFNBQXJDbEIsR0FDQSxHQUFBZ0IsR0FBZ0IzRCxFQUFBQSxRQUFZVyxLQUFBQSxXQUM1QndDLEVBQU1RLEVBQWNHLFdBSHRCWCxHQUFBUSxFQUFBRyxFQUFBOUQsT0FPUm9DLE1BQUFBLEdBQ0hBLFFBQUEyQixNQUFBLGNBQUFwQixFQUFBLG1CQUFBLDBCQXBLSTlDLFNBQU1DLElBRVhBLEVBQUFNLFdBQUEsS0FBQU4sRUFBQU0sUUFBQUgsU0FBQUgsR0FBQUEsRUFBQU0sT0FBQSxLQUNLSCxFQUFTSCxXQUFZLEtBQUFBLEVBQUFnQixRQUFBYixTQUFBSCxHQUFBQSxFQUFBZ0IsT0FBQSxRQUN0QmhCLEVBQUFrRSxXQUFBLEtBQUFsRSxFQUFBa0UsU0FBQS9ELFNBQUFILElBQUFBLEVBQUFrRSxPQUNFbEUsRUFBU00sUUFBVyxLQUFPTixFQUFTTSxLQUFoQkgsU0FBMENBLEdBQXVCSCxFQUFTTSxJQUE1RSxLQUNsQk4sRUFBU2dCLFFBQVcsS0FBT2hCLEVBQVNnQixLQUFoQmIsU0FBMENBLEdBQXVCSCxFQUFTZ0IsSUFBNUUsS0FFbEJoQixLQUdGQyxJQWhDUixHQUFBRSxVQUFBLFNBQUFnRSxHQUNBLFFBQUFBLEdBQUFBLEVBQUFDLGNBQUFDIiwiZmlsZSI6IlNjcnViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFNjcnViIFNsaWRlciAqL1xuXHJcbi8vIGhlbHBlciBmdW5jdGlvbnNcbi8vIG9iamVjdCB0ZXN0XHJcbnZhciBpc09iamVjdCA9IGZ1bmN0aW9uKGEpIHtcclxuICAgIHJldHVybiAoISFhKSAmJiAoYS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KTtcclxufTtcbi8vIGRlYm91bmNlICh0aGFua3MgdG8gVW5kZXJzY29yZSlcclxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XHJcbiAgICB2YXIgdGltZW91dDtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcbiAgICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICB9O1xyXG59O1xuXHJcbmZ1bmN0aW9uIFNjcnViKHNjcnViQXJnKSB7XG5cclxuICAgIC8vIGNoZWNrIGlmIHNpbXBsZSBjYWxsIG9yIGNvbmZpZyBwYXNzZWRcclxuICAgIGlmICggaXNPYmplY3Qoc2NydWJBcmcpICkge1xyXG4gICAgICAgIC8vIHNldCBmdW5jdGlvbiBkZWZhdWx0IGFyZ3VtZW50c1xyXG4gICAgICAgICAgc2NydWJBcmcudGFyZ2V0ID0gKCB0eXBlb2Ygc2NydWJBcmcudGFyZ2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc09iamVjdChzY3J1YkFyZykgKSA/IHNjcnViQXJnLnRhcmdldCA6IG51bGw7XHJcbiAgICAgICAgICBzY3J1YkFyZy5oZWlnaHQgPSAoIHR5cGVvZiBzY3J1YkFyZy5oZWlnaHQgIT09ICd1bmRlZmluZWQnICYmIGlzT2JqZWN0KHNjcnViQXJnKSApID8gc2NydWJBcmcuaGVpZ2h0IDogJzUwMHB4JztcclxuICAgICAgICAgIHNjcnViQXJnLmhhbmRsZSA9ICggdHlwZW9mIHNjcnViQXJnLmhhbmRsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNPYmplY3Qoc2NydWJBcmcpICkgPyBzY3J1YkFyZy5oYW5kbGUgOiB0cnVlO1xyXG4gICAgICAgICAgc2NydWJBcmcuc3JjID0gKCB0eXBlb2Ygc2NydWJBcmcuc3JjICE9PSAndW5kZWZpbmVkJyAmJiBpc09iamVjdChzY3J1YkFyZykgKSA/IHNjcnViQXJnLnNyYyA6IG51bGw7XHJcbiAgICAgICAgICBzY3J1YkFyZy5hbHQgPSAoIHR5cGVvZiBzY3J1YkFyZy5hbHQgIT09ICd1bmRlZmluZWQnICYmIGlzT2JqZWN0KHNjcnViQXJnKSApID8gc2NydWJBcmcuYWx0IDogbnVsbDtcclxuXHJcbiAgICAgICAgU2NydWJJbml0aWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgU2NydWJJbml0aWF0ZSgpO1xyXG4gICAgfVxyXG5cclxuZnVuY3Rpb24gU2NydWJJbml0aWF0ZSgpIHtcclxuICAgIC8vIGdldCBjaG9zZW4gc2xpZGVyIGNvbnRhaW5lclxyXG4gICAgY29uc3Qgc2NydWJTbGlkZXIgPSAoIGlzT2JqZWN0KHNjcnViQXJnKSApID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzY3J1YkFyZy50YXJnZXQpWzBdIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzY3J1YkFyZylbMF0gO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZnVuY3Rpb24gdXRpbGl0eUZuKGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgICAgLy8gYXZvaWQgbm9uLXNwZWNpZmljIGNsYXNzZXMuLlxyXG4gICAgICAgICAgdmFyIHNjcnViTmFtZSA9ICggaXNPYmplY3Qoc2NydWJBcmcpICkgPyAoc2NydWJBcmcudGFyZ2V0KSA6IHNjcnViQXJnO1xyXG4gICAgICAgICAgc2NydWJOYW1lID0gc2NydWJOYW1lLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xyXG4gICAgICAgICAgc2NydWJOYW1lID0gc2NydWJOYW1lLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG4gICAgICAgICAgaWYgKCBzY3J1Yk5hbWUuaW5kZXhPZignLicpID4gLTEgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzY3J1Yk5hbWUpLmxlbmd0aCA+IDEgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignJWNTY3J1YiBTbGlkZXIgd29ya3MgYmVzdCBpZiB5b3UgdXNlIGFuICVjSUQlYyBvciBhICVjdW5pcXVlJWMgY2xhc3MuLi4gJywnY29sb3I6Y29ybmZsb3dlcmJsdWU7JywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggc2NydWJTbGlkZXIgIT0gdW5kZWZpbmVkICkge1xyXG4gICAgICAgICAgICAgIHNjcnViU2xpZGVyLmNsYXNzTmFtZSArPSBcIiBzY3J1Yi1zbGlkZXJcIjtcclxuICAgICAgICAgICAgICBjb25zdCBzbGlkZXJXaWR0aCA9IHNjcnViU2xpZGVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgIC8vIHNldCBoZWlnaHQgaWYgZ2l2ZW5cclxuICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmhlaWdodCAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuc3R5bGUuaGVpZ2h0ID0gc2NydWJBcmcuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBnZXQgY2hvc2VuIHNsaWRlcidzIGltYWdlc1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjcnViQ2hpbGRyZW4gPSBzY3J1YlNsaWRlci5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTY3J1YkltYWdlcyhlbCx0eXBlLGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlID09ICdESVYnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3J1YkltYWdlID0gZWwuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGluamVjdCBzY3J1YiBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NydWJDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LmNsYXNzTmFtZSA9ICggaW5kZXggPT0gMCApID8gXCJzY3J1Yi1jb250ZW50IHNjcnViLWxlZnRcIiA6IFwic2NydWItY29udGVudCBzY3J1Yi1yaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KHNsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuaW5zZXJ0QmVmb3JlKHNjcnViQ29udCxzY3J1YlNsaWRlci5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1hdHRhY2ggZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS53aWR0aCA9IHNsaWRlcldpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhbHQgc3BlY2lmaWVkIG1hbnVhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuYWx0ICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgKCAoIGluZGV4ID09IDAgKSA/IHNjcnViQXJnLmFsdFswXSA6IHNjcnViQXJnLmFsdFsxXSApIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc3JjIHNwZWNpZmllZCBtYW51YWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5zcmMgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nU3JjID0gKCBpbmRleCA9PSAwICkgPyBzY3J1YkFyZy5zcmNbMF0gOiBzY3J1YkFyZy5zcmNbMV0gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1nU3JjICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5hcHBlbmQoc2NydWJJbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBhIGJhY2tncm91bmQgaW1hZ2UuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICggZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID09ICcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJyVjU2NydWIgU2xpZGVyIGRpdnMgbXVzdCBoYXZlIGEgJWNiYWNrZ3JvdW5kIGltYWdlIHRvIHdvcmshJWMgPjpbJywnY29sb3I6Y29ybmZsb3dlcmJsdWU7JywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHJlc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCByZXppc2VGbiA9IGRlYm91bmNlKGZ1bmN0aW9uKHNjcnViSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1NsaWRlcldpZHRoID0gc2NydWJTbGlkZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KG5ld1NsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUud2lkdGggPSBuZXdTbGlkZXJXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlemlzZUZuKHNjcnViSW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIHR5cGUgPT0gJ0lNRycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcnViSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nU3JjID0gZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNyYyBzcGVjaWZpZWQgbWFudWFsbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuc3JjICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjID0gKCBpbmRleCA9PSAwICkgPyBzY3J1YkFyZy5zcmNbMF0gOiBzY3J1YkFyZy5zcmNbMV0gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGluamVjdCBzY3J1YiBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NydWJDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LmNsYXNzTmFtZSA9ICggaW5kZXggPT0gMCApID8gXCJzY3J1Yi1jb250ZW50IHNjcnViLWxlZnRcIiA6IFwic2NydWItY29udGVudCBzY3J1Yi1yaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KHNsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGFsdCBzcGVjaWZpZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5hbHQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAoICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuYWx0WzBdIDogc2NydWJBcmcuYWx0WzFdICkgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuaW5zZXJ0QmVmb3JlKHNjcnViQ29udCxzY3J1YlNsaWRlci5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1hdHRhY2ggZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS53aWR0aCA9IHNsaWRlcldpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1nU3JjICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5hcHBlbmQoc2NydWJJbWFnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSByZXNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmV6aXNlRm4gPSBkZWJvdW5jZShmdW5jdGlvbihzY3J1YkltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdTbGlkZXJXaWR0aCA9IHNjcnViU2xpZGVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuc3R5bGUud2lkdGggPSBwYXJzZUludChuZXdTbGlkZXJXaWR0aCAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLndpZHRoID0gbmV3U2xpZGVyV2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXppc2VGbihzY3J1YkltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gc2NydWJDaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkNoaWxkcmVuW2ldICYmIGNoaWxkLnRhZ05hbWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2NydWJJbWFnZXMoIHNjcnViQ2hpbGRyZW5baV0sIGNoaWxkLnRhZ05hbWUsIGkgKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2soc2NydWJTbGlkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCclY1NjcnViIFNsaWRlciBuZWVkcyB0byBiZSBwYXNzZWQgYW4gYXBwcm9wcmlhdGUgc2VsZWN0b3IgJWMtIHByZWZlcmFibHkgYW4gSUQsIGJ1dCBhIHNwZWNpZmljLCB1bmlxdWUgY2xhc3Mgd29ya3MgdG9vLicsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHV0aWxpdHlGbihmdW5jdGlvbihzY3J1YlNsaWRlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHNjcnViIGNvbnRyb2wvaGFuZGxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY3J1YkhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgc2NydWJIYW5kbGUuY2xhc3NOYW1lPSBcInNsaWRpbmcgaGFuZGxlT24gXCI7XHJcbiAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzbGlkaW5nLWxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJzbGlkaW5nLXJpZ2h0XCI+PC9zcGFuPic7XHJcbiAgICAgICAgICAgICAgICBzY3J1YlNsaWRlci5hcHBlbmRDaGlsZChzY3J1YkhhbmRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGhhbmRsZSBpZiBzcGVjaWZpZWRcclxuICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuaGFuZGxlID09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcnViSGFuZGxlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcnViSGFuZGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2hhbmRsZU9uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2NydWIgc2xpZGVyIG1haW4gYWN0aW9uIGZuXHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZXIgPSBkZWJvdW5jZShmdW5jdGlvbihwb3MsZnVsbCxzbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViSGFuZGxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2hyaW5rID0gZnVsbCAtIHBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNsaWRpbmcgPSBzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGluZ1swXS5zdHlsZS5sZWZ0ID0gKChwb3MgPiAwKSA/IHBvcyA6IDApICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudExlZnQgPSBzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNjcnViLWxlZnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudExlZnRbMF0uc3R5bGUud2lkdGggPSAoKHBvcyA+IDApID8gcG9zIDogMCkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50UmlnaHQgPSBzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNjcnViLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRSaWdodFswXS5zdHlsZS53aWR0aCA9ICgoc2hyaW5rID4gMCkgPyBzaHJpbmsgOiAwKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBtb3VzZW1vdmUgbGlzdGVuZXJcclxuICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IG1vdXNlUG9zaXRpb24gPSBlLmNsaWVudFggLSB0aGlzLm9mZnNldExlZnQ7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBmdWxsV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgbW92ZXIobW91c2VQb3NpdGlvbixmdWxsV2lkdGgsc2NydWJTbGlkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfWNhdGNoKGUpe1xyXG4gICAgICAgIGNvbnNvbGUudHJhY2UoJyVjdWgtb2g6ICVjJyArIGUgKyAnJywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycpO1xyXG4gICAgfVxyXG59XHJcbn1cclxuIl19
