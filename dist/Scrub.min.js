"use strict";function Scrub(e){function r(){var r=t(e)?document.querySelectorAll(e.target)[0]:document.querySelectorAll(e)[0];try{!function(l){var n=t(e)?e.target:e;if(n=n.replace("#",""),n=n.replace(".",""),n.indexOf(".")>-1&&document.querySelectorAll(n).length>1&&console.warn("%cScrub Slider works best if you use an %cID%c or a %cunique%c class... ","color:cornflowerblue;","color:indianred;","color:cornflowerblue;","color:indianred;","color:cornflowerblue;"),void 0!=r){r.className+=" scrub-slider";var c=r.offsetWidth;null!=e.height&&(r.style.height=e.height);for(var o=r.children,a=0;a<2;a++){var i=o[a];o[a]&&i.tagName&&function(t,l,n){if("DIV"==l){var o=t.cloneNode(!0);t.parentNode.removeChild(t);var a=document.createElement("div");if(a.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",a.style.width=parseInt(c/2)+"px",r.insertBefore(a,r.firstChild),o.style.width=c+"px",null!=e.alt&&o.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),null!=e.src){var i=0==n?e.src[0]:e.src[1];o.style.backgroundImage="url("+i+")"}a.append(o),""==t.style.backgroundImage&&console.warn("%cScrub Slider divs must have a %cbackground image to work!%c >:[","color:cornflowerblue;","color:indianred;","color:cornflowerblue;")}else if("IMG"==l){var s=document.createElement("div"),u=t.getAttribute("src");null!=e.src&&(u=0==n?e.src[0]:e.src[1]),t.parentNode.removeChild(t);var d=document.createElement("div");d.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",d.style.width=parseInt(c/2)+"px",null!=e.alt&&s.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),r.insertBefore(d,r.firstChild),s.style.width=c+"px",s.style.backgroundImage="url("+u+")",d.append(s)}}(o[a],i.tagName,a)}l(r)}else console.warn("%cScrub Slider needs to be passed an appropriate selector %c- preferably an ID, but a specific, unique class works too.","color:cornflowerblue;","color:indianred;")}(function(r){var t=document.createElement("div");t.className="sliding handleOn ",t.innerHTML='<span class="sliding-left"></span><span class="sliding-right"></span>',r.appendChild(t),0==e.handle&&(t.innerHTML="",t.classList.remove("handleOn"));var l=function(e,r,t){var l;return function(){var n=this,c=arguments,o=function(){l=null,t||e.apply(n,c)},a=t&&!l;clearTimeout(l),l=setTimeout(o,r),a&&e.apply(n,c)}}(function(e,r,l){if(t){var n=r-e;l.querySelectorAll(".sliding")[0].style.left=(e>0?e:0)+"px";l.querySelectorAll(".scrub-left")[0].style.width=(e>0?e:0)+"px";l.querySelectorAll(".scrub-right")[0].style.width=(n>0?n:0)+"px"}},10);r.addEventListener("mousemove",function(e){var t=e.clientX-this.offsetLeft,n=r.offsetWidth;l(t,n,r)})})}catch(e){console.trace("%cuh-oh: %c"+e,"color:indianred;","color:cornflowerblue;")}}var t=function(e){return!!e&&e.constructor===Object};t(e)?(e.target=void 0!==e.target&&t(e)?e.target:null,e.height=void 0!==e.height&&t(e)?e.height:"500px",e.handle=void 0===e.handle||!t(e)||e.handle,e.src=void 0!==e.src&&t(e)?e.src:null,e.alt=void 0!==e.alt&&t(e)?e.alt:null,r()):r()}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcnViLmpzIl0sIm5hbWVzIjpbIlNjcnViIiwic2NydWJBcmciLCJTY3J1YkluaXRpYXRlIiwic2NydWJTbGlkZXIiLCJpc09iamVjdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInRhcmdldCIsImNhbGxiYWNrIiwic2NydWJOYW1lIiwicmVwbGFjZSIsImxlbmd0aCIsImNvbnNvbGUiLCJ1bmRlZmluZWQiLCJzbGlkZXJXaWR0aCIsImNyZWF0ZVNjcnViSW1hZ2VzIiwib2Zmc2V0V2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsInNjcnViSW1hZ2UiLCJjbG9uZU5vZGUiLCJzY3J1YkNvbnQiLCJjaGlsZHJlbiIsImkiLCJjaGlsZCIsInNjcnViQ2hpbGRyZW4iLCJpbnNlcnRCZWZvcmUiLCJ0eXBlIiwiZWwiLCJwYXJlbnROb2RlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImluZGV4IiwicGFyc2VJbnQiLCJmaXJzdENoaWxkIiwid2lkdGgiLCJhbHQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJpbWdTcmMiLCJzcmMiLCJhcHBlbmQiLCJ3YXJuIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQ2hpbGQiLCJ0YWdOYW1lIiwic2NydWJIYW5kbGUiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImhhbmRsZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm1vdmVyIiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImFwcGx5IiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJwb3MiLCJmdWxsIiwic2xpZGVyIiwic2xpZGluZyIsImxlZnQiLCJjb250ZW50TGVmdCIsImNvbnRlbnRSaWdodCIsInNocmluayIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGhpcyIsIm9mZnNldExlZnQiLCJmdWxsV2lkdGgiLCJtb3Vz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QyxjQUFnQkMsT0FEdkMvRSxHQUFBSCxJQUlLRyxFQUFTSCxXQUFZLEtBQUFBLEVBQUFNLFFBQUFILEVBQUFILEdBQUFBLEVBQUFNLE9BQUEsS0FDdEJOLEVBQUFnQixXQUFBLEtBQUFoQixFQUFBZ0IsUUFBQWIsRUFBQUgsR0FBQUEsRUFBQWdCLE9BQUEsUUFDRWhCLEVBQVNNLFdBQXNDLEtBQXBCTixFQUFTTSxTQUEwQkgsRUFBU0gsSUFBY0EsRUFBbkVnRCxPQUNsQmhELEVBQVNnQixRQUFXLEtBQU9oQixFQUFTZ0IsS0FBaEJiLEVBQTBDQSxHQUF1QkgsRUFBU2dCLElBQTVFLEtBQ2xCaEIsRUFBU2dELFFBQVcsS0FBT2hELEVBQVNnRCxLQUFoQjdDLEVBQTBDQSxHQUF1QkgsRUFBU2dELElBQTVFLEtBRWxCaEQsS0FOTkMiLCJmaWxlIjoiU2NydWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogU2NydWIgU2xpZGVyICovXHJcblxyXG5mdW5jdGlvbiBTY3J1YihzY3J1YkFyZykge1xyXG5cclxuICAgIHZhciBpc09iamVjdCA9IGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICByZXR1cm4gKCEhYSkgJiYgKGEuY29uc3RydWN0b3IgPT09IE9iamVjdCk7XHJcbiAgICB9O1xyXG4gICAgLy8gY2hlY2sgaWYgc2ltcGxlIGNhbGwgb3IgY29uZmlnIHBhc3NlZFxyXG4gICAgaWYgKCBpc09iamVjdChzY3J1YkFyZykgKSB7XHJcbiAgICAgICAgLy8gc2V0IGZ1bmN0aW9uIGRlZmF1bHQgYXJndW1lbnRzXHJcbiAgICAgICAgICBzY3J1YkFyZy50YXJnZXQgPSAoIHR5cGVvZiBzY3J1YkFyZy50YXJnZXQgIT09ICd1bmRlZmluZWQnICYmIGlzT2JqZWN0KHNjcnViQXJnKSApID8gc2NydWJBcmcudGFyZ2V0IDogbnVsbDtcclxuICAgICAgICAgIHNjcnViQXJnLmhlaWdodCA9ICggdHlwZW9mIHNjcnViQXJnLmhlaWdodCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNPYmplY3Qoc2NydWJBcmcpICkgPyBzY3J1YkFyZy5oZWlnaHQgOiAnNTAwcHgnO1xyXG4gICAgICAgICAgc2NydWJBcmcuaGFuZGxlID0gKCB0eXBlb2Ygc2NydWJBcmcuaGFuZGxlICE9PSAndW5kZWZpbmVkJyAmJiBpc09iamVjdChzY3J1YkFyZykgKSA/IHNjcnViQXJnLmhhbmRsZSA6IHRydWU7XHJcbiAgICAgICAgICBzY3J1YkFyZy5zcmMgPSAoIHR5cGVvZiBzY3J1YkFyZy5zcmMgIT09ICd1bmRlZmluZWQnICYmIGlzT2JqZWN0KHNjcnViQXJnKSApID8gc2NydWJBcmcuc3JjIDogbnVsbDtcclxuICAgICAgICAgIHNjcnViQXJnLmFsdCA9ICggdHlwZW9mIHNjcnViQXJnLmFsdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNPYmplY3Qoc2NydWJBcmcpICkgPyBzY3J1YkFyZy5hbHQgOiBudWxsO1xyXG5cclxuICAgICAgICBTY3J1YkluaXRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBTY3J1YkluaXRpYXRlKCk7XHJcbiAgICB9XHJcblxyXG5mdW5jdGlvbiBTY3J1YkluaXRpYXRlKCkge1xyXG4gICAgLy8gZ2V0IGNob3NlbiBzbGlkZXIgY29udGFpbmVyXHJcbiAgICBjb25zdCBzY3J1YlNsaWRlciA9ICggaXNPYmplY3Qoc2NydWJBcmcpICkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcnViQXJnLnRhcmdldClbMF0gOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcnViQXJnKVswXSA7XHJcblxyXG4gICAgdHJ5e1xyXG4gICAgICAgIGZ1bmN0aW9uIHV0aWxpdHlGbihjYWxsYmFjaykge1xyXG5cclxuICAgICAgICAgIC8vIGF2b2lkIG5vbi1zcGVjaWZpYyBjbGFzc2VzLi5cclxuICAgICAgICAgIHZhciBzY3J1Yk5hbWUgPSAoIGlzT2JqZWN0KHNjcnViQXJnKSApID8gKHNjcnViQXJnLnRhcmdldCkgOiBzY3J1YkFyZztcclxuICAgICAgICAgIHNjcnViTmFtZSA9IHNjcnViTmFtZS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcclxuICAgICAgICAgIHNjcnViTmFtZSA9IHNjcnViTmFtZS5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcclxuICAgICAgICAgIGlmICggc2NydWJOYW1lLmluZGV4T2YoJy4nKSA+IC0xICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2NydWJOYW1lKS5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJyVjU2NydWIgU2xpZGVyIHdvcmtzIGJlc3QgaWYgeW91IHVzZSBhbiAlY0lEJWMgb3IgYSAlY3VuaXF1ZSVjIGNsYXNzLi4uICcsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnLCdjb2xvcjppbmRpYW5yZWQ7JywnY29sb3I6Y29ybmZsb3dlcmJsdWU7Jyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHNjcnViU2xpZGVyICE9IHVuZGVmaW5lZCApIHtcclxuICAgICAgICAgICAgICBzY3J1YlNsaWRlci5jbGFzc05hbWUgKz0gXCIgc2NydWItc2xpZGVyXCI7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAvLyBzZXQgaGVpZ2h0IGlmIGdpdmVuXHJcbiAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5oZWlnaHQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLnN0eWxlLmhlaWdodCA9IHNjcnViQXJnLmhlaWdodDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGNob3NlbiBzbGlkZXIncyBpbWFnZXNcclxuICAgICAgICAgICAgICAgIGxldCBzY3J1YkNoaWxkcmVuID0gc2NydWJTbGlkZXIuY2hpbGRyZW47XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2NydWJJbWFnZXMoZWwsdHlwZSxpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PSAnRElWJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSBkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NydWJJbWFnZSA9IGVsLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmplY3Qgc2NydWIgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcnViQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5jbGFzc05hbWUgPSAoIGluZGV4ID09IDAgKSA/IFwic2NydWItY29udGVudCBzY3J1Yi1sZWZ0XCIgOiBcInNjcnViLWNvbnRlbnQgc2NydWItcmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuc3R5bGUud2lkdGggPSBwYXJzZUludChzbGlkZXJXaWR0aCAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmluc2VydEJlZm9yZShzY3J1YkNvbnQsc2NydWJTbGlkZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYXR0YWNoIGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUud2lkdGggPSBzbGlkZXJXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgYWx0IHNwZWNpZmllZCBtYW51YWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmFsdCAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICggKCBpbmRleCA9PSAwICkgPyBzY3J1YkFyZy5hbHRbMF0gOiBzY3J1YkFyZy5hbHRbMV0gKSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNyYyBzcGVjaWZpZWQgbWFudWFsbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuc3JjICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1NyYyA9ICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuc3JjWzBdIDogc2NydWJBcmcuc3JjWzFdIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZ1NyYyArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuYXBwZW5kKHNjcnViSW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYSBiYWNrZ3JvdW5kIGltYWdlLi5cclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVsLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9PSAnJyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCclY1NjcnViIFNsaWRlciBkaXZzIG11c3QgaGF2ZSBhICVjYmFja2dyb3VuZCBpbWFnZSB0byB3b3JrISVjID46WycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09ICdJTUcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3J1YkltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1NyYyA9IGVsLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzcmMgc3BlY2lmaWVkIG1hbnVhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLnNyYyAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9ICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuc3JjWzBdIDogc2NydWJBcmcuc3JjWzFdIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmplY3Qgc2NydWIgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcnViQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5jbGFzc05hbWUgPSAoIGluZGV4ID09IDAgKSA/IFwic2NydWItY29udGVudCBzY3J1Yi1sZWZ0XCIgOiBcInNjcnViLWNvbnRlbnQgc2NydWItcmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuc3R5bGUud2lkdGggPSBwYXJzZUludChzbGlkZXJXaWR0aCAvIDIpICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhbHQgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuYWx0ICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgKCAoIGluZGV4ID09IDAgKSA/IHNjcnViQXJnLmFsdFswXSA6IHNjcnViQXJnLmFsdFsxXSApIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmluc2VydEJlZm9yZShzY3J1YkNvbnQsc2NydWJTbGlkZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtYXR0YWNoIGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViSW1hZ2Uuc3R5bGUud2lkdGggPSBzbGlkZXJXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZ1NyYyArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuYXBwZW5kKHNjcnViSW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHNjcnViQ2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgICAgICAgIGlmICggc2NydWJDaGlsZHJlbltpXSAmJiBjaGlsZC50YWdOYW1lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNjcnViSW1hZ2VzKCBzY3J1YkNoaWxkcmVuW2ldLCBjaGlsZC50YWdOYW1lLCBpICk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHNjcnViU2xpZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignJWNTY3J1YiBTbGlkZXIgbmVlZHMgdG8gYmUgcGFzc2VkIGFuIGFwcHJvcHJpYXRlIHNlbGVjdG9yICVjLSBwcmVmZXJhYmx5IGFuIElELCBidXQgYSBzcGVjaWZpYywgdW5pcXVlIGNsYXNzIHdvcmtzIHRvby4nLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnLCdjb2xvcjppbmRpYW5yZWQ7Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1dGlsaXR5Rm4oZnVuY3Rpb24oc2NydWJTbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBzY3J1YiBjb250cm9sL2hhbmRsZVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NydWJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHNjcnViSGFuZGxlLmNsYXNzTmFtZT0gXCJzbGlkaW5nIGhhbmRsZU9uIFwiO1xyXG4gICAgICAgICAgICAgICAgc2NydWJIYW5kbGUuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic2xpZGluZy1sZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwic2xpZGluZy1yaWdodFwiPjwvc3Bhbj4nO1xyXG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuYXBwZW5kQ2hpbGQoc2NydWJIYW5kbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBoYW5kbGUgaWYgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmhhbmRsZSA9PSBmYWxzZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5jbGFzc0xpc3QucmVtb3ZlKCdoYW5kbGVPbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRlYm91bmNlICh0aGFua3MgdG8gVW5kZXJzY29yZSlcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgXHR2YXIgdGltZW91dDtcclxuICAgICAgICAgICAgICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgXHRcdHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgIFx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIFx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgXHRcdFx0aWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICBcdFx0fTtcclxuICAgICAgICAgICAgICAgIFx0XHR2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcclxuICAgICAgICAgICAgICAgIFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xyXG4gICAgICAgICAgICAgICAgXHRcdGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgXHR9O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIHNjcnViIHNsaWRlciBtYWluIGFjdGlvbiBmblxyXG4gICAgICAgICAgICAgICAgdmFyIG1vdmVyID0gZGVib3VuY2UoZnVuY3Rpb24ocG9zLGZ1bGwsc2xpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkhhbmRsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNocmluayA9IGZ1bGwgLSBwb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzbGlkaW5nID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRpbmdbMF0uc3R5bGUubGVmdCA9ICgocG9zID4gMCkgPyBwb3MgOiAwKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnRMZWZ0ID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3J1Yi1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMZWZ0WzBdLnN0eWxlLndpZHRoID0gKChwb3MgPiAwKSA/IHBvcyA6IDApICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudFJpZ2h0ID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3J1Yi1yaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50UmlnaHRbMF0uc3R5bGUud2lkdGggPSAoKHNocmluayA+IDApID8gc2hyaW5rIDogMCkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIG1vdXNlbW92ZSBsaXN0ZW5lclxyXG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbW91c2VQb3NpdGlvbiA9IGUuY2xpZW50WCAtIHRoaXMub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgICAgbGV0IGZ1bGxXaWR0aCA9IHNjcnViU2xpZGVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICBtb3Zlcihtb3VzZVBvc2l0aW9uLGZ1bGxXaWR0aCxzY3J1YlNsaWRlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9Y2F0Y2goZSl7XHJcbiAgICAgICAgY29uc29sZS50cmFjZSgnJWN1aC1vaDogJWMnICsgZSArICcnLCdjb2xvcjppbmRpYW5yZWQ7JywnY29sb3I6Y29ybmZsb3dlcmJsdWU7Jyk7XHJcbiAgICB9XHJcbn1cclxufVxyXG4iXX0=
