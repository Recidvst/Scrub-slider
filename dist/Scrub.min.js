function debounce(e,t,r){var l;return function(){var c=this,n=arguments,o=function(){l=null,r||e.apply(c,n)},i=r&&!l;clearTimeout(l),l=setTimeout(o,t),i&&e.apply(c,n)}}function Scrub(e){function t(){var t=isObject(e)||"object"==typeof e?document.querySelectorAll(e.target)[0]:document.querySelectorAll(e)[0];try{!function(r){var l=isObject(e)||"object"==typeof e?e.target:e;if(l=l.replace("#",""),l=l.replace(".",""),l.indexOf(".")>-1&&document.querySelectorAll(l).length>1&&console.warn("%cScrub Slider works best if you use an %cID%c or a %cunique%c class... ","color:cornflowerblue;","color:indianred;","color:cornflowerblue;","color:indianred;","color:cornflowerblue;"),void 0!=t){t.className+=" scrub-slider";var c=t.offsetWidth;null!=e.height&&(t.style.height=e.height);for(var n=t.children,o=0;o<2;o++){var i=n[o];n[o]&&i.tagName&&function(r,l,n){if("DIV"==l){var o=r.cloneNode(!0);r.parentNode.removeChild(r);var i=document.createElement("div");if(i.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",i.style.width=parseInt(c/2)+"px",t.insertBefore(i,t.firstChild),o.style.width=c+"px",null!=e.alt&&o.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),null!=e.src){var a=0==n?e.src[0]:e.src[1];o.style.backgroundImage="url("+a+")"}i.appendChild(o),""==r.style.backgroundImage&&console.warn("%cScrub Slider divs must have a %cbackground image to work!%c >:[","color:cornflowerblue;","color:indianred;","color:cornflowerblue;");var s=debounce(function(e){var r=t.offsetWidth;i.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){s(o)})}else if("IMG"==l){var o=document.createElement("div"),a=r.getAttribute("src");null!=e.src&&(a=0==n?e.src[0]:e.src[1]),r.parentNode.removeChild(r);var i=document.createElement("div");i.className=0==n?"scrub-content scrub-left":"scrub-content scrub-right",i.style.width=parseInt(c/2)+"px",null!=e.alt&&o.setAttribute("alt",0==n?e.alt[0]:e.alt[1]),t.insertBefore(i,t.firstChild),o.style.width=c+"px",o.style.backgroundImage="url("+a+")",i.appendChild(o);var s=debounce(function(e){var r=t.offsetWidth;i.style.width=parseInt(r/2)+"px",e.style.width=r+"px"},500);window.addEventListener("resize",function(e){s(o)})}}(n[o],i.tagName,o)}r(t)}else console.warn("%cScrub Slider needs to be passed an appropriate selector %c- preferably an ID, but a specific, unique class works too.","color:cornflowerblue;","color:indianred;")}(function(t){var r=document.createElement("div");r.className="sliding handleOn ",r.innerHTML='<span class="sliding-left"></span><span class="sliding-right"></span>',t.appendChild(r),0==e.handle&&(r.innerHTML="",r.classList.remove("handleOn"));var l=debounce(function(e,t,l){if(r){var c=t-e;l.querySelectorAll(".sliding")[0].style.left=(e>0?e:0)+"px";l.querySelectorAll(".scrub-left")[0].style.width=(e>0?e:0)+"px";l.querySelectorAll(".scrub-right")[0].style.width=(c>0?c:0)+"px"}},1);t.addEventListener("mousemove",function(e){var r=e.clientX-this.offsetLeft,c=t.offsetWidth;l(r,c,t)})})}catch(e){console.trace("%cuh-oh: %c"+e,"color:indianred;","color:cornflowerblue;")}}isObject(e)||"object"==typeof e?(e.target=void 0===e.target||!isObject(e)&&"object"!=typeof e?null:e.target,e.height=void 0===e.height||!isObject(e)&&"object"!=typeof e?"500px":e.height,e.handle=void 0===e.handle||!isObject(e)&&"object"!=typeof e||e.handle,e.src=void 0===e.src||!isObject(e)&&"object"!=typeof e?null:e.src,e.alt=void 0===e.alt||!isObject(e)&&"object"!=typeof e?null:e.alt,t()):t()}var isObject=function(e){return!!e&&e.varructor===Object};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcnViLmpzIl0sIm5hbWVzIjpbImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsInRoaXMiLCJhcmdzIiwiYXJndW1lbnRzIiwibGF0ZXIiLCJhcHBseSIsImNhbGxOb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiU2NydWIiLCJzY3J1YkFyZyIsIlNjcnViSW5pdGlhdGUiLCJzY3J1YlNsaWRlciIsImlzT2JqZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFyZ2V0IiwiY2FsbGJhY2siLCJzY3J1Yk5hbWUiLCJyZXBsYWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsImNvbnNvbGUiLCJ3YXJuIiwidW5kZWZpbmVkIiwiY2xhc3NOYW1lIiwic2xpZGVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsInN0eWxlIiwic2NydWJDaGlsZHJlbiIsImNoaWxkcmVuIiwiaSIsImNoaWxkIiwidGFnTmFtZSIsImVsIiwidHlwZSIsImluZGV4Iiwic2NydWJJbWFnZSIsImNsb25lTm9kZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNjcnViQ29udCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsInBhcnNlSW50IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImFsdCIsInNldEF0dHJpYnV0ZSIsInNyYyIsImltZ1NyYyIsImJhY2tncm91bmRJbWFnZSIsImFwcGVuZENoaWxkIiwicmV6aXNlRm4iLCJuZXdTbGlkZXJXaWR0aCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZ2V0QXR0cmlidXRlIiwic2NydWJIYW5kbGUiLCJpbm5lckhUTUwiLCJoYW5kbGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtb3ZlciIsInBvcyIsImZ1bGwiLCJzbGlkZXIiLCJzaHJpbmsiLCJsZWZ0IiwibW91c2VQb3NpdGlvbiIsImNsaWVudFgiLCJvZmZzZXRMZWZ0Iiwi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QUFNLEVBQUtBLEVBQU0sR0FBSyxJQUNqQ0UsR0FBT3JELGlCQUFpQixlQUMzQixHQUFHYyxNQUFNZSxPQUFVc0IsRUFBTSxFQUFLQSxFQUFNLEdBQUssSUFDckNFLEdBQU9yRCxpQkFBaUIsZ0JBQzNCLEdBQUdjLE1BQU1lLE9BQVV5QixFQUFTLEVBQUtBLEVBQVMsR0FBSyxPQUVwRSxFQUVIekQsR0FBWTZDLGlCQUFpQixZQUFhLFNBQVNDLEdBQ2pELEdBQUlhLEdBQWdCYixFQUFFYyxRQUFVdkUsS0FBS3dFLFdBQ2pDQyxFQUFZOUQsRUFBWWUsV0FDNUJzQyxHQUFNTSxFQUFjRyxFQUFVOUQsT0FHM0MsTUFBTThDLEdBQ0hwQyxRQUFRcUQsTUFBTSxjQUFnQmpCLEVBQU8sbUJBQW1CLDBCQWhLdkQ3QyxTQUFTSCxJQUFnQyxnQkFBWkEsSUFFNUJBLEVBQVNNLFdBQXNDLEtBQXBCTixFQUFTTSxTQUEyQkgsU0FBU0gsSUFBZ0MsZ0JBQVpBLEdBQTZDLEtBQWxCQSxFQUFTTSxPQUNoSU4sRUFBU2tCLFdBQXNDLEtBQXBCbEIsRUFBU2tCLFNBQTJCZixTQUFTSCxJQUFnQyxnQkFBWkEsR0FBNkMsUUFBbEJBLEVBQVNrQixPQUNoSWxCLEVBQVNvRCxXQUFzQyxLQUFwQnBELEVBQVNvRCxTQUEyQmpELFNBQVNILElBQWdDLGdCQUFaQSxJQUEyQkEsRUFBU29ELE9BQ2hJcEQsRUFBU3dDLFFBQWdDLEtBQWpCeEMsRUFBU3dDLE1BQXdCckMsU0FBU0gsSUFBZ0MsZ0JBQVpBLEdBQTBDLEtBQWZBLEVBQVN3QyxJQUMxSHhDLEVBQVNzQyxRQUFnQyxLQUFqQnRDLEVBQVNzQyxNQUF3Qm5DLFNBQVNILElBQWdDLGdCQUFaQSxHQUEwQyxLQUFmQSxFQUFTc0MsSUFFNUhyQyxLQUdBQSxJQWpDUixHQUFJRSxVQUFXLFNBQVMrRCxHQUNwQixRQUFVQSxHQUFPQSxFQUFFQyxZQUFjQyIsImZpbGUiOiJTY3J1Yi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBTY3J1YiBTbGlkZXIgKi9cblxuLy8gaGVscGVyIGZ1bmN0aW9uc1xuLy8gb2JqZWN0IHRlc3RcbnZhciBpc09iamVjdCA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gKCEhYSkgJiYgKGEudmFycnVjdG9yID09PSBPYmplY3QpO1xufTtcbi8vIGRlYm91bmNlICh0aGFua3MgdG8gVW5kZXJzY29yZSlcbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbn07XG5cbmZ1bmN0aW9uIFNjcnViKHNjcnViQXJnKSB7XG5cbiAgICAvLyBjaGVjayBpZiBzaW1wbGUgY2FsbCBvciBjb25maWcgcGFzc2VkXG4gICAgaWYgKCBpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkge1xuICAgICAgICAvLyBzZXQgZnVuY3Rpb24gZGVmYXVsdCBhcmd1bWVudHNcbiAgICAgICAgICBzY3J1YkFyZy50YXJnZXQgPSAoIHR5cGVvZiBzY3J1YkFyZy50YXJnZXQgIT09ICd1bmRlZmluZWQnICYmIChpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgKSA/IHNjcnViQXJnLnRhcmdldCA6IG51bGw7XG4gICAgICAgICAgc2NydWJBcmcuaGVpZ2h0ID0gKCB0eXBlb2Ygc2NydWJBcmcuaGVpZ2h0ICE9PSAndW5kZWZpbmVkJyAmJiAoaXNPYmplY3Qoc2NydWJBcmcpIHx8IHR5cGVvZiBzY3J1YkFyZyA9PSAnb2JqZWN0JyApICkgPyBzY3J1YkFyZy5oZWlnaHQgOiAnNTAwcHgnO1xuICAgICAgICAgIHNjcnViQXJnLmhhbmRsZSA9ICggdHlwZW9mIHNjcnViQXJnLmhhbmRsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKGlzT2JqZWN0KHNjcnViQXJnKSB8fCB0eXBlb2Ygc2NydWJBcmcgPT0gJ29iamVjdCcgKSApID8gc2NydWJBcmcuaGFuZGxlIDogdHJ1ZTtcbiAgICAgICAgICBzY3J1YkFyZy5zcmMgPSAoIHR5cGVvZiBzY3J1YkFyZy5zcmMgIT09ICd1bmRlZmluZWQnICYmIChpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgKSA/IHNjcnViQXJnLnNyYyA6IG51bGw7XG4gICAgICAgICAgc2NydWJBcmcuYWx0ID0gKCB0eXBlb2Ygc2NydWJBcmcuYWx0ICE9PSAndW5kZWZpbmVkJyAmJiAoaXNPYmplY3Qoc2NydWJBcmcpIHx8IHR5cGVvZiBzY3J1YkFyZyA9PSAnb2JqZWN0JyApICkgPyBzY3J1YkFyZy5hbHQgOiBudWxsO1xuXG4gICAgICAgIFNjcnViSW5pdGlhdGUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIFNjcnViSW5pdGlhdGUoKTtcbiAgICB9XG5cbmZ1bmN0aW9uIFNjcnViSW5pdGlhdGUoKSB7XG4gICAgLy8gZ2V0IGNob3NlbiBzbGlkZXIgY29udGFpbmVyXG4gICAgdmFyIHNjcnViU2xpZGVyID0gKCBpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcnViQXJnLnRhcmdldClbMF0gOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcnViQXJnKVswXSA7XG5cbiAgICB0cnkge1xuICAgICAgICBmdW5jdGlvbiB1dGlsaXR5Rm4oY2FsbGJhY2spIHtcblxuICAgICAgICAgIC8vIGF2b2lkIG5vbi1zcGVjaWZpYyBjbGFzc2VzLi5cbiAgICAgICAgICB2YXIgc2NydWJOYW1lID0gKCBpc09iamVjdChzY3J1YkFyZykgfHwgdHlwZW9mIHNjcnViQXJnID09ICdvYmplY3QnICkgPyAoc2NydWJBcmcudGFyZ2V0KSA6IHNjcnViQXJnO1xuICAgICAgICAgIHNjcnViTmFtZSA9IHNjcnViTmFtZS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcbiAgICAgICAgICBzY3J1Yk5hbWUgPSBzY3J1Yk5hbWUucmVwbGFjZShcIi5cIiwgXCJcIik7XG4gICAgICAgICAgaWYgKCBzY3J1Yk5hbWUuaW5kZXhPZignLicpID4gLTEgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzY3J1Yk5hbWUpLmxlbmd0aCA+IDEgKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJyVjU2NydWIgU2xpZGVyIHdvcmtzIGJlc3QgaWYgeW91IHVzZSBhbiAlY0lEJWMgb3IgYSAlY3VuaXF1ZSVjIGNsYXNzLi4uICcsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycsJ2NvbG9yOmluZGlhbnJlZDsnLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnLCdjb2xvcjppbmRpYW5yZWQ7JywnY29sb3I6Y29ybmZsb3dlcmJsdWU7Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHNjcnViU2xpZGVyICE9IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgc2NydWJTbGlkZXIuY2xhc3NOYW1lICs9IFwiIHNjcnViLXNsaWRlclwiO1xuICAgICAgICAgICAgICB2YXIgc2xpZGVyV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgLy8gc2V0IGhlaWdodCBpZiBnaXZlblxuICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLmhlaWdodCAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLnN0eWxlLmhlaWdodCA9IHNjcnViQXJnLmhlaWdodDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGNob3NlbiBzbGlkZXIncyBpbWFnZXNcbiAgICAgICAgICAgICAgICB2YXIgc2NydWJDaGlsZHJlbiA9IHNjcnViU2xpZGVyLmNoaWxkcmVuO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2NydWJJbWFnZXMoZWwsdHlwZSxpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT0gJ0RJVicgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIGRpdlxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NydWJJbWFnZSA9IGVsLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGluamVjdCBzY3J1YiBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcnViQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuY2xhc3NOYW1lID0gKCBpbmRleCA9PSAwICkgPyBcInNjcnViLWNvbnRlbnQgc2NydWItbGVmdFwiIDogXCJzY3J1Yi1jb250ZW50IHNjcnViLXJpZ2h0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KHNsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmluc2VydEJlZm9yZShzY3J1YkNvbnQsc2NydWJTbGlkZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWF0dGFjaCBkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS53aWR0aCA9IHNsaWRlcldpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgYWx0IHNwZWNpZmllZCBtYW51YWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5hbHQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgKCAoIGluZGV4ID09IDAgKSA/IHNjcnViQXJnLmFsdFswXSA6IHNjcnViQXJnLmFsdFsxXSApIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzcmMgc3BlY2lmaWVkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5zcmMgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1NyYyA9ICggaW5kZXggPT0gMCApID8gc2NydWJBcmcuc3JjWzBdIDogc2NydWJBcmcuc3JjWzFdIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBpbWdTcmMgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuYXBwZW5kQ2hpbGQoc2NydWJJbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYSBiYWNrZ3JvdW5kIGltYWdlLi5cbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPT0gJycgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJyVjU2NydWIgU2xpZGVyIGRpdnMgbXVzdCBoYXZlIGEgJWNiYWNrZ3JvdW5kIGltYWdlIHRvIHdvcmshJWMgPjpbJywnY29sb3I6Y29ybmZsb3dlcmJsdWU7JywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycpO1xuICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHJlc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV6aXNlRm4gPSBkZWJvdW5jZShmdW5jdGlvbihzY3J1YkltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2xpZGVyV2lkdGggPSBzY3J1YlNsaWRlci5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5zdHlsZS53aWR0aCA9IHBhcnNlSW50KG5ld1NsaWRlcldpZHRoIC8gMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLndpZHRoID0gbmV3U2xpZGVyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXppc2VGbihzY3J1YkltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggdHlwZSA9PSAnSU1HJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgZGl2XG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3J1YkltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWdTcmMgPSBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNyYyBzcGVjaWZpZWQgbWFudWFsbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQXJnLnNyYyAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmMgPSAoIGluZGV4ID09IDAgKSA/IHNjcnViQXJnLnNyY1swXSA6IHNjcnViQXJnLnNyY1sxXSA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5qZWN0IHNjcnViIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NydWJDb250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViQ29udC5jbGFzc05hbWUgPSAoIGluZGV4ID09IDAgKSA/IFwic2NydWItY29udGVudCBzY3J1Yi1sZWZ0XCIgOiBcInNjcnViLWNvbnRlbnQgc2NydWItcmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LnN0eWxlLndpZHRoID0gcGFyc2VJbnQoc2xpZGVyV2lkdGggLyAyKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGFsdCBzcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2NydWJBcmcuYWx0ICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICggKCBpbmRleCA9PSAwICkgPyBzY3J1YkFyZy5hbHRbMF0gOiBzY3J1YkFyZy5hbHRbMV0gKSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmluc2VydEJlZm9yZShzY3J1YkNvbnQsc2NydWJTbGlkZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLWF0dGFjaCBkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS53aWR0aCA9IHNsaWRlcldpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZ1NyYyArICcpJztcbiAgICAgICAgICAgICAgICAgICAgICAgc2NydWJDb250LmFwcGVuZENoaWxkKHNjcnViSW1hZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSByZXNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlemlzZUZuID0gZGVib3VuY2UoZnVuY3Rpb24oc2NydWJJbWFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NsaWRlcldpZHRoID0gc2NydWJTbGlkZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzY3J1YkNvbnQuc3R5bGUud2lkdGggPSBwYXJzZUludChuZXdTbGlkZXJXaWR0aCAvIDIpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NydWJJbWFnZS5zdHlsZS53aWR0aCA9IG5ld1NsaWRlcldpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV6aXNlRm4oc2NydWJJbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHNjcnViQ2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICBpZiAoIHNjcnViQ2hpbGRyZW5baV0gJiYgY2hpbGQudGFnTmFtZSApIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2NydWJJbWFnZXMoIHNjcnViQ2hpbGRyZW5baV0sIGNoaWxkLnRhZ05hbWUsIGkgKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKHNjcnViU2xpZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignJWNTY3J1YiBTbGlkZXIgbmVlZHMgdG8gYmUgcGFzc2VkIGFuIGFwcHJvcHJpYXRlIHNlbGVjdG9yICVjLSBwcmVmZXJhYmx5IGFuIElELCBidXQgYSBzcGVjaWZpYywgdW5pcXVlIGNsYXNzIHdvcmtzIHRvby4nLCdjb2xvcjpjb3JuZmxvd2VyYmx1ZTsnLCdjb2xvcjppbmRpYW5yZWQ7Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAgICAgdXRpbGl0eUZuKGZ1bmN0aW9uKHNjcnViU2xpZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHNjcnViIGNvbnRyb2wvaGFuZGxlXG4gICAgICAgICAgICAgICAgdmFyIHNjcnViSGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgc2NydWJIYW5kbGUuY2xhc3NOYW1lPSBcInNsaWRpbmcgaGFuZGxlT24gXCI7XG4gICAgICAgICAgICAgICAgc2NydWJIYW5kbGUuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic2xpZGluZy1sZWZ0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwic2xpZGluZy1yaWdodFwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHNjcnViU2xpZGVyLmFwcGVuZENoaWxkKHNjcnViSGFuZGxlKTtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBoYW5kbGUgaWYgc3BlY2lmaWVkXG4gICAgICAgICAgICAgICAgaWYgKCBzY3J1YkFyZy5oYW5kbGUgPT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcnViSGFuZGxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBzY3J1YkhhbmRsZS5jbGFzc0xpc3QucmVtb3ZlKCdoYW5kbGVPbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHNjcnViIHNsaWRlciBtYWluIGFjdGlvbiBmblxuICAgICAgICAgICAgICAgIHZhciBtb3ZlciA9IGRlYm91bmNlKGZ1bmN0aW9uKHBvcyxmdWxsLHNsaWRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcnViSGFuZGxlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNocmluayA9IGZ1bGwgLSBwb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGluZyA9IHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGluZ1swXS5zdHlsZS5sZWZ0ID0gKChwb3MgPiAwKSA/IHBvcyA6IDApICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRMZWZ0ID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zY3J1Yi1sZWZ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGVmdFswXS5zdHlsZS53aWR0aCA9ICgocG9zID4gMCkgPyBwb3MgOiAwKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50UmlnaHQgPSBzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNjcnViLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50UmlnaHRbMF0uc3R5bGUud2lkdGggPSAoKHNocmluayA+IDApID8gc2hyaW5rIDogMCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgICAvLyBhZGQgbW91c2Vtb3ZlIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgc2NydWJTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIG1vdXNlUG9zaXRpb24gPSBlLmNsaWVudFggLSB0aGlzLm9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgICB2YXIgZnVsbFdpZHRoID0gc2NydWJTbGlkZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICBtb3Zlcihtb3VzZVBvc2l0aW9uLGZ1bGxXaWR0aCxzY3J1YlNsaWRlcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9Y2F0Y2goZSl7XG4gICAgICAgIGNvbnNvbGUudHJhY2UoJyVjdWgtb2g6ICVjJyArIGUgKyAnJywnY29sb3I6aW5kaWFucmVkOycsJ2NvbG9yOmNvcm5mbG93ZXJibHVlOycpO1xuICAgIH1cbn1cbn1cbiJdfQ==
